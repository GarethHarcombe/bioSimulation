<!DOCTYPE html>
<html>
    <head>
        <title>Title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <style>
            canvas {
                border:1px solid #d3d3d3;
                background-color: #f1f1f1;
            }
        </style>
    </head>
    <body onload="startGame()">
    <script>
        var animals = [];
        var food = [];
        
        function startGame() {
            for (i = 0; i < 5; i++) {
                animals.push(new component(20, 20, "red", 240, 135));
            }
            myGameArea.start();
        }

        var myGameArea = {
            canvas: document.createElement("canvas"),
            start: function () {
                this.canvas.width = 480;
                this.canvas.height = 270;
                for (i = 0; i < 5; i++) {
                    food.push(new component(5, 5, "green", Math.floor(Math.random() * this.canvas.width), Math.floor(Math.random() * this.canvas.height)));
                }
                this.context = this.canvas.getContext("2d");
                document.body.insertBefore(this.canvas, document.body.childNodes[0]);
                this.interval = setInterval(updateGameArea, 20);
            },
            clear: function () {
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }
        }

        function component(width, height, color, x, y) {
            this.width = width;
            this.height = height;
            this.x = x;
            this.y = y;
            this.angle = 0;
            this.update = function () {
                ctx = myGameArea.context;
                ctx.fillStyle = color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }
        }

        function updateGameArea() {
            myGameArea.clear();
            for (i = 0; i < animals.length; i++) {
                animals[i].angle += (Math.random() * 2 - 1) / 4;
                if (animals[i].x < 0) { animals[i].angle = 0; }
                if (animals[i].x > myGameArea.canvas.width - animals[i].width) { animals[i].angle = Math.PI; }
                if (animals[i].y < 0) { animals[i].angle = Math.PI / 2; }
                if (animals[i].y > myGameArea.canvas.height  - animals[i].height) { animals[i].angle = 3 * Math.PI / 2; }

                shortestDistance = 75;
                newAngle = 0;
                food.forEach(element => {
                    distance = Math.sqrt(Math.pow(animals[i].x - element.x, 2) + Math.pow(animals[i].y - element.y, 2));
                    if (distance < shortestDistance) {
                        shortestDistance = distance;
                        newAngle = Math.atan2(element.y - animals[i].y, element.x - animals[i].x);
                    }
                })
                if (shortestDistance != 75) {
                    animals[i].angle = newAngle;
                }

                animals[i].x += Math.cos(animals[i].angle);
                animals[i].y += Math.sin(animals[i].angle);
                animals[i].update();
            }

            for (i = 0; i < food.length; i++) {
                food[i].update();
            }
        }
    </script>
    <p>The three components moves by changing the x- and y-coordinates on every update.</p>
    </body>
</html>
